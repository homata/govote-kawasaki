{"version":3,"sources":["App/toGeoJson.ts","App/Links.tsx","App/distance-label.ts","App/Shop.tsx","App/assets/iconmap-bbs.svg","App/assets/iconmap-senkyowari-yen.svg","App/assets/iconmap-vote.svg","App/assets/iconmap-votebeforehand.svg","App/Map.tsx","App/Home.tsx","App/ShopListItem.tsx","App/List.tsx","geolocation.ts","App/AboutUs.tsx","App/Category.tsx","App/Images.tsx","App/Tabbar.tsx","lib/zen2han.ts","lib/table2json.ts","App.tsx","Qrcode.tsx","About.tsx","Container.tsx","serviceWorkerRegistration.ts","index.tsx"],"names":["toGeoJson","data","geojson","type","features","id","item","feature","geometry","coordinates","Number","properties","_id","i","Object","keys","length","key","push","noop","e","stopPropagation","Content","props","className","href","onClick","size","makeDistanceLabelText","distance","distanceTipText","isNaN","Math","round","text","shop","clickHandler","close","category","content","latitude","longitude","color","to","style","margin","src","alt","width","wordBreak","split","map","line","result","undefined","initialViewState","zoom","mapLib","maplibregl","height","marginTop","mapStyle","anchor","position","maker_size","marker_bbs","Image","marker_senkyowari_yen","marker_vote","marker_votebeforehand","svg_bbs","svg_senkyowari_yen","svg_vote","svg_votebeforehand","mapContainer","useRef","React","useState","mapObject","setMapObject","setShop","zLatLngString","setZLatLngString","useEffect","flyTo","center","on","getSource","addSource","forEach","layer_id","marker_object","getLayer","image_id","addImage","addLayer","source","filter","getCanvas","cursor","event","cluster","opacity","OpacityControl","baseLayers","addControl","addMarkers","q","hash","url","qstr","window","location","substring","URLSearchParams","parseHash","set","toString","replace","current","Map","container","pitch","bearing","attributionControl","AttributionControl","compact","ScaleControl","NavigationControl","GeolocateControl","positionOptions","enableHighAccuracy","trackUserLocation","FullscreenControl","document","querySelector","onMapLoad","getCenter","rawZoom","getZoom","precision","ceil","LN2","log","LN10","m","pow","lng","lat","zStr","orienteationchangeHandler","resize","addEventListener","removeEventListener","off","ref","popupHandler","image","isCategoryPage","queryCategory","sortShopList","shopList","a","Promise","resolve","reject","navigator","geolocation","getCurrentPosition","pos","coords","error","timeout","maximumAge","currentPosition","from","turf","sortingShopList","parseFloat","units","sort","b","setData","list","setList","page","setPage","hasMore","setHasMore","useSearchParams","get","isMounted","process","REACT_APP_ORDERBY","then","sortedData","slice","loader","textAlign","top","dataLength","next","scrollableTarget","index","listStyleType","target","rel","marginBottom","navigate","useNavigate","categoryList","setCategoryList","categories","indexOf","htmlFor","onChange","value","options","label","validImageList","setValidImageList","imageListItems","ImageListItem","loading","onError","parentNode","remove","ImageList","sx","cols","rowHeight","zen2han","str","s","String","fromCharCode","charCodeAt","table2json","table","header","record","reduce","prev","column","item1","item2","Date","parse","App","setShopList","fetch","getTime","response","ok","status","fetchedData","JSON","console","values","nextShopList","match","sortedShopList","path","element","Home","Qrcode","Canvas","useQRCode","logoUrl","config","logo_image_url","description","isLocalhost","Boolean","hostname","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","catch","ReactDOM","render","StrictMode","getElementById","URL","origin","headers","contentType","ready","unregister","reload","checkValidServiceWorker","serviceWorkerRegistration"],"mappings":"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","file":"static/js/main.a1998cde.chunk.js","sourcesContent":["type Geometry = {\n  type: string;\n  coordinates: number[]\n}\n\ntype featureProperties = {\n  [key: string]: string;\n}\n\ntype Feature = {\n  type: string;\n  geometry: Geometry;\n  properties: featureProperties\n}\n\ntype itemObject = {\n  [key: string]: any;\n}\n\ntype GeoJSON = {\n  type: string;\n  features: Feature[]\n}\n\nconst toGeoJson = (data: any) => {\n  const geojson = {\n    type: \"FeatureCollection\",\n    features: []\n  } as GeoJSON\n\n  for (const id in data) {\n    const item = data[id] as itemObject\n\n    if (!item['経度'] || !item['緯度'] || !item['スポット名']) {\n      return;\n    }\n\n    const feature = {\n      type: \"Feature\",\n      geometry: {\n        type: \"Point\",\n        coordinates: [Number(item['経度']), Number(item['緯度'])]\n      },\n      properties: {_id: id}\n    } as Feature\n\n    for (let i = 0; i < Object.keys(item).length; i++) {\n      const key = Object.keys(item)[i]\n      feature.properties[key] = item[key]\n    }\n\n    geojson.features.push(feature)\n  }\n\n  return geojson\n}\n\nexport default toGeoJson;\n","import React from \"react\";\n// import { FaTwitter, FaInstagram, FaHome } from 'react-icons/fa';\nimport { FaHome } from 'react-icons/fa';\n\nimport './Links.scss'\n\ntype Props = {\n  data: Pwamap.ShopData;\n};\n\nconst noop = (e: React.MouseEvent) => {\n  e.stopPropagation()\n}\n\nconst Content = (props: Props) => {\n\n  return (\n    <div className=\"links\">\n      {props.data['公式サイト']?<div className=\"link\"><a href={props.data['公式サイト']}><FaHome onClick={noop} size=\"20px\" /></a></div>:''}\n    </div>\n  );\n};\n\nexport default Content;\n","export const makeDistanceLabelText = (distance: number | void) => {\n  let distanceTipText = \"\"\n  if(typeof distance === 'number' && !Number.isNaN(distance)) {\n    if(distance > 1000) {\n      distanceTipText = Math.round(distance / 1000) + ' km'\n    } else {\n      distanceTipText = Math.round(distance) + ' m'\n    }\n  }\n  return distanceTipText\n}\n","import React from \"react\";\nimport Links from './Links'\nimport './Shop.scss'\nimport { AiOutlineClose } from 'react-icons/ai'\nimport { Link } from \"react-router-dom\";\nimport { makeDistanceLabelText } from \"./distance-label\";\nimport Map, {\n  Marker,\n  // Popup,\n  NavigationControl,\n  // FullscreenControl,\n  // ScaleControl,\n  GeolocateControl\n} from 'react-map-gl';\n\nimport maplibregl from 'maplibre-gl';\nimport 'maplibre-gl/dist/maplibre-gl.css';\n\ntype Props = {\n  shop: Pwamap.ShopData;\n  close: Function;\n}\n\nconst Content = (props: Props) => {\n  const { shop } = props\n\n  const clickHandler = () => {\n    props.close()\n  }\n\n  const distanceTipText = makeDistanceLabelText(shop.distance)\n  const category = shop['カテゴリ']\n  const content = shop['紹介文']\n\n  const toBreakLine = (text: string) => {\n\n    return text.split(/(\\r\\n)|(\\n)|(\\r)/g).map((line, i) => {\n\n      let result: any = '';\n\n      if (line === '\\r\\n' || line === '\\n' || line === '\\r') {\n        result = <br key={i} />\n      } else if (line !== undefined) {\n        result = line\n      }\n\n      return result\n    })\n  }\n\n  // @ts-ignore\n  let latitude = Number(shop['緯度'])\n  let longitude = Number(shop['経度'])\n  return <div className=\"shop-single\">\n    <div className=\"head\">\n      <button onClick={clickHandler}><AiOutlineClose size=\"16px\" color=\"#FFFFFF\" /> 閉じる</button>\n    </div>\n    <div className=\"container\">\n      {shop?\n        <>\n          <h2>{shop['スポット名']}</h2>\n          <div>\n            <span className=\"nowrap\">\n              <Link to={`/list?category=${category}`}>\n                <span onClick={clickHandler} className=\"category\">{category}</span>\n              </Link>\n            </span>\n            <span className=\"nowrap\">{distanceTipText && <span className=\"distance\">現在位置から {distanceTipText}</span> }</span>\n          </div>\n\n          <div style={{margin: \"24px 0\"}}><Links data={shop} /></div>\n\n          { shop['画像'] && <img src={shop['画像']} alt={shop['スポット名']} style={{width: \"100%\"}} />}\n          { shop['カテゴリ'] === \"センキョ割実施店舗\" &&\n            <div>\n              センキョ割内容:\n              <p style={{margin: \"8px 0\", wordBreak: \"break-all\"}}>\n              {shop['Twitter']}\n             </p>\n            </div>\n          }\n\n          <p style={{margin: \"24px 0\", wordBreak: \"break-all\"}}>住所：{toBreakLine(content)}</p>\n\n          <Map\n            initialViewState={{\n              longitude: longitude,\n              latitude: latitude,\n              zoom: 16,\n            }}\n            mapLib={maplibregl}\n            style={{width: '100%', height: '300px', marginTop: \"24px\"}}\n            mapStyle=\"https://tile.openstreetmap.jp/styles/osm-bright-ja/style.json\"\n          >\n            <Marker longitude={longitude} latitude={latitude} anchor=\"bottom\" ></Marker>\n            <GeolocateControl position=\"top-left\" />\n            <NavigationControl position=\"top-left\" />\n          </Map>\n\n          <p><a className=\"small\" href={`http://maps.apple.com/?q=${latitude},${longitude}`}>スポットまでの道順</a></p>\n\n          <div className=\"note\" >\n            { shop['カテゴリ'] === \"センキョ割実施店舗\" &&\n              <p>\n                <a href={shop['Instagram']}>店舗URL</a>\n              </p>\n            }\n            { shop['カテゴリ'] !== \"センキョ割実施店舗\" &&\n              <p>\n                <a href={shop['Instagram']}>出典URL</a>\n              </p>\n            }\n\n            <ul>\n              <li>ポスター掲示場設置場所、投票所、期日前投票所の情報は、平成31年第19回統一地方選挙のものを使用しております。令和5年第20回統一地方選挙と実情が異なる場合がございます。予めご了承ください。</li>\n              <li>ポスター掲示場設置場所、投票所、期日前投票所の位置は、住所を元におおよその位置を示しており、正確な位置を示した情報ではございません。ご注意ください。</li>\n            </ul>\n          </div>\n        </>\n        :\n        <></>\n      }\n    </div>\n  </div>;\n};\n\nexport default Content;\n","export default __webpack_public_path__ + \"static/media/iconmap-bbs.98f4aef3.svg\";","export default __webpack_public_path__ + \"static/media/iconmap-senkyowari-yen.01ddbf24.svg\";","export default __webpack_public_path__ + \"static/media/iconmap-vote.1c524d2b.svg\";","export default __webpack_public_path__ + \"static/media/iconmap-votebeforehand.1edd129f.svg\";","import React, { useRef, useState } from 'react';\nimport maplibregl from 'maplibre-gl';\nimport 'maplibre-gl/dist/maplibre-gl.css';\nimport './Map.scss';\n\n// @ts-ignore　OpacityControlプラグインの読み込み\nimport OpacityControl from 'maplibre-gl-opacity';\nimport 'maplibre-gl-opacity/dist/maplibre-gl-opacity.css';\n\n// @ts-ignore\n//import geojsonExtent from '@mapbox/geojson-extent'\nimport toGeoJson from './toGeoJson'\n//import setCluster from './setCluster'\nimport Shop from './Shop'\n\n// Maker Icon images\nimport svg_bbs from './assets/iconmap-bbs.svg'\nimport svg_senkyowari_yen from './assets/iconmap-senkyowari-yen.svg'\nimport svg_vote from './assets/iconmap-vote.svg'\nimport svg_votebeforehand from './assets/iconmap-votebeforehand.svg'\nconst maker_size = 48;\nconst marker_bbs = new Image(maker_size, maker_size);\nconst marker_senkyowari_yen = new Image(maker_size, maker_size);\nconst marker_vote = new Image(maker_size, maker_size);\nconst marker_votebeforehand = new Image(maker_size, maker_size);\nmarker_bbs.src = svg_bbs;\nmarker_senkyowari_yen.src = svg_senkyowari_yen;\nmarker_vote.src = svg_vote;\nmarker_votebeforehand.src = svg_votebeforehand;\n\ntype Props = {\n  data: Pwamap.ShopData[];\n};\n\n// const hidePoiLayers = (map: any) => {\n//\n//   const hideLayers = [\n//     'poi',\n//     'poi-primary',\n//     'poi-r0-r9',\n//     'poi-r10-r24',\n//     'poi-r25',\n//     'poi-bus',\n//     'poi-entrance',\n//   ]\n//\n//   for (let i = 0; i < hideLayers.length; i++) {\n//     const layerId = hideLayers[i];\n//     map.setLayoutProperty(layerId, 'visibility', 'none')\n//   }\n// }\n\nconst parseHash = (url?: Location | URL) => {\n  const qstr = (url || window.location).hash.substring(2);\n  const q = new URLSearchParams(qstr);\n  return q;\n};\n\nconst updateHash = (q: URLSearchParams) => {\n  const hash = q.toString();\n  if (hash) {\n    window.location.hash = `#/?${q.toString().replace(/%2F/g, '/')}`;\n  }\n};\n\nconst Content = (props: Props) => {\n  const mapContainer = useRef<HTMLDivElement | null>(null);\n  const [mapObject, setMapObject] = React.useState<maplibregl.Map | null>(null)\n  const [shop, setShop] = React.useState<Pwamap.ShopData | undefined>(undefined)\n  const [zLatLngString, setZLatLngString] = React.useState<string>('');\n  // 川崎市\n  const [longitude] = useState(139.6347);\n  const [latitude] = useState(35.5542);\n  const [zoom] = useState(11);\n\n  const addMarkers = (mapObject: any, data: any) => {\n    if (!mapObject || !data) {\n      return\n    }\n\n    mapObject.on('render', () => {\n      // nothing to do if shops exists.\n      if (mapObject.getSource('shops')) {\n        return\n      }\n\n      const geojson: any = toGeoJson(data)\n      mapObject.addSource('shops', {\n        type: 'geojson',\n        data: geojson,\n        //cluster: true,\n        //clusterMaxZoom: 14,\n        //clusterRadius: 25,\n      })\n\n      geojson.features.forEach(function (feature: any) {\n        let category:string = feature.properties['カテゴリ'];\n\n        let layer_id: string = \"\";\n        let marker_object: any = null;\n\n        if (category === \"センキョ割実施店舗\") {\n          layer_id = 'poi-senkyowari_yen';\n          marker_object = marker_senkyowari_yen;\n        } else if (category === \"期日前投票所\") {\n          layer_id = 'poi-votebeforehand';\n          marker_object = marker_votebeforehand\n        } else if (category === \"投票所\") {\n          layer_id = 'poi-vote';\n          marker_object = marker_vote;\n        } else if (category === \"ポスター掲示場設置場所\") {\n          layer_id = 'poi-bbs';\n          marker_object = marker_bbs;\n        } else {\n          layer_id = \"\";\n          marker_object = null;\n        }\n        // Add a layer for this symbol type if it hasn't been added already.\n        if (!mapObject.getLayer(layer_id)) {\n          // アイコン画像設定\n          let image_id: string = \"img_\" + layer_id;\n          mapObject.addImage(image_id, marker_object);\n\n          // スタイル設定\n          mapObject.addLayer({\n            'id': layer_id,\n            'type': 'symbol',\n            source: 'shops',\n            filter: ['==', \"カテゴリ\", category],\n            'layout': {\n              'icon-image': image_id,\n              \"icon-allow-overlap\": true,\n              \"icon-size\": 1.0,\n              'text-field': \"{スポット名}\",\n              'text-font': ['Noto Sans Regular'],\n              'text-variable-anchor': ['top', 'bottom', 'left', 'right'],\n              'text-radial-offset': 1.7,\n              'text-justify': 'auto',\n              'text-size': 12,\n              'text-anchor': 'top',\n              'text-max-width': 12,\n              'text-allow-overlap': false,\n            },\n          });\n\n          mapObject.on('mouseenter', layer_id, () => {\n            mapObject.getCanvas().style.cursor = 'pointer'\n          })\n\n          mapObject.on('mouseleave', layer_id, () => {\n            mapObject.getCanvas().style.cursor = ''\n          })\n\n          mapObject.on('click', layer_id, (event: any) => {\n            if (!event.features[0].properties.cluster) {\n              setShop(event.features[0].properties)\n            }\n          })\n        }\n      });\n\n      //setCluster(mapObject)\n\n      // 背景地図・重ねるタイル地図のコントロール\n      const opacity = new OpacityControl({\n        baseLayers: {\n          'poi-senkyowari_yen': 'センキョ割実施店舗',\n          'poi-votebeforehand': '期日前投票所',\n          'poi-vote': '投票所',\n          'poi-bbs': 'ポスター掲示場設置場所',\n        },\n      });\n      mapObject.addControl(opacity, 'top-left');\n    });\n  }\n\n  React.useEffect(() => {\n    if (mapObject) {\n      mapObject.flyTo({center: [longitude, latitude], zoom: zoom});\n    }\n  }, [mapObject, longitude, latitude, zoom])\n\n  React.useEffect(() => {\n    addMarkers(mapObject, props.data)\n  }, [mapObject, props.data])\n\n  React.useEffect(() => {\n    const hash = parseHash();\n    if (zLatLngString) {\n      hash.set('map', zLatLngString);\n    }\n    updateHash(hash);\n  }, [ zLatLngString ]);\n\n\n  React.useEffect(() => {\n    // Only once reder the map.\n    if (!mapContainer.current || mapObject) {\n      return\n    }\n\n    //const geojson: any = toGeoJson(props.data)\n    //const bounds: any = geojsonExtent(geojson)\n\n    const map: maplibregl.Map = new maplibregl.Map({\n      container: mapContainer.current,\n      style: 'https://tile.openstreetmap.jp/styles/osm-bright-ja/style.json', // 地図のスタイル\n      center: [longitude, latitude],  // 中心座標\n      zoom: zoom, // ズームレベル\n      pitch: 0, // 傾き\n      bearing: 0,\n      attributionControl: false // 既存Attributionを非表示\n    });\n\n    // コントロールの追加\n    // Attributionを折りたたみ表示\n    map.addControl(new maplibregl.AttributionControl({compact: true}), 'top-right');\n    // @ts-ignore　スケール\n    map.addControl(new maplibregl.ScaleControl(), 'top-left');\n    // @ts-ignore　拡大・縮小　\n    map.addControl(new maplibregl.NavigationControl(), 'top-right');\n    // 現在位置検索\n    map.addControl(new maplibregl.GeolocateControl({positionOptions: {enableHighAccuracy: true},trackUserLocation: true}), 'top-right');\n    // @ts-ignore　フルスクリーン\n    map.addControl(new maplibregl.FullscreenControl({container: document.querySelector('body')}));\n    // タイル枠\n    //map.showTileBoundaries = true;\n\n    // URLハッシュを作成して、位置移動\n    // const hash = parseHash();\n    // if (hash && hash.get('map')) {\n    //   const latLngString = hash.get('map') || '';\n    //   const zlatlng = latLngString.split('/');\n    //\n    //   const zoom = Number(zlatlng[0])\n    //   const lat = Number(zlatlng[1])\n    //   const lng = Number(zlatlng[2])\n    //   map.flyTo({center: [lng, lat], zoom: zoom});\n    // } else if (bounds) {\n    //   map.fitBounds(bounds, { padding: 50 })\n    // }\n\n    const onMapLoad = () => {\n      // hidePoiLayers(map)\n      setMapObject(map)\n\n      map.on('moveend', () => {\n        // see: https://github.com/maplibre/maplibre-gl-js/blob/ba7bfbc846910c5ae848aaeebe4bde6833fc9cdc/src/ui/hash.js#L59\n        const center = map.getCenter(),\n          rawZoom = map.getZoom(),\n          zoom = Math.round(rawZoom * 100) / 100,\n          // derived from equation: 512px * 2^z / 360 / 10^d < 0.5px\n          precision = Math.ceil((zoom * Math.LN2 + Math.log(512 / 360 / 0.5)) / Math.LN10),\n          m = Math.pow(10, precision),\n          lng = Math.round(center.lng * m) / m,\n          lat = Math.round(center.lat * m) / m,\n          zStr = Math.ceil(zoom);\n\n        setZLatLngString(`${zStr}/${lat}/${lng}`);\n      });\n    }\n\n    const orienteationchangeHandler = () => {\n      map.resize()\n    }\n\n    // attach\n    map.on('load', onMapLoad)\n\n    window.addEventListener('orientationchange', orienteationchangeHandler)\n\n    return () => {\n      // detach to prevent memory leak\n      window.removeEventListener('orientationchange', orienteationchangeHandler)\n      map.off('load', onMapLoad)\n    }\n  }, [mapObject, props.data, longitude, latitude, zoom])\n\n  const closeHandler = () => {\n    setShop(undefined)\n  }\n\n  return (\n    <div className=\"map-wrap\">\n      <div className=\"map-container\" ref={mapContainer}></div>\n      {shop ?\n        <Shop shop={shop} close={closeHandler} />\n        :\n        <></>\n      }\n    </div>\n  );\n}\n\nexport default Content;\n","import React from \"react\";\nimport Map from \"./Map\"\n\ntype Props = {\n  data: Pwamap.ShopData[];\n}\n\nconst Content = (props: Props) => {\n  return (\n    <>\n      <Map data={props.data} />\n    </>\n  );\n};\n\nexport default Content;\n","import { BsChevronCompactRight } from 'react-icons/bs'\nimport './ShopListItem.scss'\nimport { Link } from \"react-router-dom\";\nimport { makeDistanceLabelText } from \"./distance-label\";\n\ntype Props = {\n  data: Pwamap.ShopData;\n  popupHandler: Function;\n  queryCategory: string | null;\n};\n\nconst Content = (props: Props) => {\n  const clickHandler = () => {\n    props.popupHandler(props.data)\n  }\n\n  const distanceTipText = makeDistanceLabelText(props.data.distance)\n  const category = props.data['カテゴリ']\n  const image = props.data['画像']\n\n  const isCategoryPage = props.queryCategory ? true :false\n\n  return (\n    <>\n      <div className=\"shop-link\">\n        <h2 className=\"shop-title\" style={{ wordBreak: \"break-all\" }} onClick={clickHandler}>{props.data['スポット名']}</h2>\n        <div className='tag-box'>\n          {\n            !isCategoryPage &&\n            <span className=\"nowrap\">\n              <Link to={`/list?category=${category}`}>\n                <span className=\"category\">{category}</span>\n              </Link>\n            </span>\n          }\n          <span className=\"nowrap\">{distanceTipText && <span className=\"distance\">現在位置から {distanceTipText}</span>}</span>\n        </div>\n\n        <div style={{ margin: \"10px 10px 10px 0\" }}>\n\n          { image && <img src={image} alt={props.data['スポット名']} onClick={clickHandler}/>}\n\n        </div>\n\n        <div className=\"right\" onClick={clickHandler}><BsChevronCompactRight size=\"40px\" color=\"#CCCCCC\" /></div>\n      </div>\n    </>\n  );\n};\n\nexport default Content;\n","import React from \"react\";\nimport ShopListItem from './ShopListItem'\nimport Shop from './Shop'\nimport './List.scss'\nimport { useSearchParams } from \"react-router-dom\";\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport { askGeolocationPermission } from '../geolocation'\nimport * as turf from \"@turf/turf\"\n\ntype Props = {\n  data: Pwamap.ShopData[];\n}\n\nconst sortShopList = async (shopList: Pwamap.ShopData[]) => {\n  const currentPosition = await askGeolocationPermission()\n  if(currentPosition) {\n    const from = turf.point(currentPosition);\n    const sortingShopList = shopList.map((shop) => {\n      const lng = parseFloat(shop['経度'])\n      const lat = parseFloat(shop['緯度'])\n      if(Number.isNaN(lng) || Number.isNaN(lat)) {\n        return shop\n      } else {\n        const to = turf.point([lng, lat])\n        const distance = turf.distance(from, to, {units: 'meters' as 'meters'});\n        return { ...shop, distance }\n      }\n    })\n    sortingShopList.sort((a,b) => {\n      if(typeof a.distance !== 'number' || Number.isNaN(a.distance)) {\n        return 1\n      } else if (typeof b.distance !== 'number' || Number.isNaN(b.distance)) {\n        return -1\n      } else {\n        return a.distance - b.distance\n      }\n    })\n    return sortingShopList\n  } else {\n    return shopList\n  }\n}\n\nconst Content = (props: Props) => {\n\n  const [shop, setShop] = React.useState<Pwamap.ShopData | undefined>()\n  const [data, setData] = React.useState<Pwamap.ShopData[]>(props.data)\n  const [list, setList] = React.useState<any[]>([]);\n  const [page, setPage] = React.useState(10);\n  const [hasMore, setHasMore] = React.useState(true);\n\n  const [searchParams] = useSearchParams();\n  const queryCategory = searchParams.get('category')\n\n  React.useEffect(() => {\n\n    let data = props.data;\n\n    if (queryCategory) {\n      data = props.data.filter((shop) => {\n        return shop['カテゴリ'] === queryCategory\n      })\n    }\n\n    let isMounted = true\n    // prevent memory leak\n    if (isMounted) {\n\n      const orderBy = process.env.REACT_APP_ORDERBY\n\n      if (orderBy === 'distance') {\n\n        sortShopList(data)\n          .then(sortedData => {\n            // prevent memory leak\n            if (isMounted) {\n              setList(sortedData.slice(0, page))\n              setData(sortedData)\n            }\n          })\n\n      } else {\n        setList(data.slice(0, page))\n        setData(data)\n      }\n    }\n\n    return () => {\n      isMounted = false\n    }\n  }, [props.data, queryCategory, page])\n\n\n  const popupHandler = (shop: Pwamap.ShopData) => {\n    if (shop) {\n      setShop(shop)\n    }\n  }\n\n  const closeHandler = () => {\n    setShop(undefined)\n  }\n\n    //項目を読み込むときのコールバック\n    const loadMore = () => {\n\n      //データ件数が0件の場合、処理終了\n      if (list.length >= data.length) {\n        setHasMore(false);\n        return;\n      }\n\n      setList([...list, ...data.slice(page, page + 10)])\n      setPage(page + 10)\n    }\n\n  const loader = <div\n    className=\"loader\"\n    key={0}\n    style={{\n      width: '100%',\n      height: '200px',\n      textAlign: 'center',\n      position: 'relative',\n      top: '100px'\n    }}\n  >場所一覧を読み込み中です...</div>;\n\n  return (\n    <div id=\"shop-list\" className=\"shop-list\">\n      {queryCategory && <div className=\"shop-list-category\">{`カテゴリ：「${queryCategory}」`}</div>}\n\n      <InfiniteScroll\n        dataLength={list.length}\n        next={loadMore}\n        hasMore={hasMore}\n        loader={loader}\n        scrollableTarget=\"shop-list\"\n      >\n        {\n          list.map((item, index) => {\n\n            return (<div key={index} className=\"shop\">\n              <ShopListItem\n                data={item}\n                popupHandler={popupHandler}\n                queryCategory={queryCategory}\n              />\n            </div>)\n\n          })\n        }\n      </InfiniteScroll>\n      {shop ?\n        <Shop shop={shop} close={closeHandler} />\n        :\n        <></>\n      }\n    </div>\n  );\n};\n\nexport default Content;\n","export const askGeolocationPermission = () => {\n  return new Promise<Pwamap.LngLat | null>((resolve, reject) => {\n\n    if(!window.navigator.geolocation || !window.navigator.geolocation.getCurrentPosition) {\n      resolve(null)\n    }\n\n    window.navigator.geolocation.getCurrentPosition(\n      (pos) => {\n        const lat = pos.coords.latitude\n        const lng = pos.coords.longitude\n        resolve([lng, lat])\n      },\n      (error) => {\n        resolve(null)\n      },\n      {\n        enableHighAccuracy: true,\n        timeout: 5000,\n        maximumAge: 0\n      }\n    )\n  })\n}\n","import './AboutUs.scss'\nimport React from \"react\";\n\nconst Content = () => {\n  return (\n    <div className=\"about-us\">\n      <div className=\"container\">\n        <div className=\"branding\">\n          <div className=\"image\"><img src={`${process.env.PUBLIC_URL}/assets/logo.png`} alt=\"\"/></div>\n          <div className=\"logo\">GoVote KAWASAKIアプリ</div>\n        </div>\n\n        <h2>さそいあって選挙にいこう！</h2>\n        <p>\n          投票行動を川崎市民が身近に楽しめるムーブメントにしたい！と願う川崎市内の団体・組織・企業が集まって「GoVote KAWASAKI」を立ち上げました。\n        </p>\n        <p>\n          「GoVote KAWASAKI」を合言葉に投票をリアルやSNS上（Twitter / Instagram / Facebook）で呼びかけるほか、ポスター、ステッカー、Zoom背景、\n          のデータを公式サイトで無料配布します。<br/>\n          ぜひ、ハッシュタグをつけて、発信してください！\n        </p>\n        <h3>ハッシュタグ</h3>\n        <p>\n          <ul style={{ listStyleType: \"none\" }}>\n            <li>#GoVoteKAWASAKI</li>\n            <li>#選挙</li>\n            <li>#選挙に行こう</li>\n            <li>#選挙にいこうキャンペーン</li>\n          </ul>\n        </p>\n\n        <h4>About GoVote KAWASAKI</h4>\n        <p>\n          GoVote KAWASAKI は川崎市民に投票を促す市民による活動です。\n        </p>\n        <p>\n          『Go Vote KAWASAKI』を合言葉に、ステッカー、ポスター、Zoom背景を無料配布するほか、市内の飲食店やサービス業のみなさんとともに投票へ行こう！の輪を広げていきます。\n        </p>\n\n        <h4>関連サイト</h4>\n        <p>\n          <div className=\"info-list\">\n            <ul>\n              <li><a href=\"https://www.govote-kawasaki.jp/\" target='_blank' rel=\"noreferrer\">公式サイト</a></li>\n              <li><a href=\"https://twitter.com/kawasaki_vote\" target='_blank' rel=\"noreferrer\">Twitter</a></li>\n              <li><a href=\"https://www.facebook.com/govote.kawasaki\" target='_blank' rel=\"noreferrer\">Facebook</a></li>\n              <li><a href=\"https://www.instagram.com/govote.kawasaki/?hl=ja\" target='_blank' rel=\"noreferrer\">Instagram</a></li>\n            </ul>\n          </div>\n        </p>\n\n        <h4>選挙情報</h4>\n        <p>\n          <div className=\"info-list\">\n            令和5年4月9日執行第20回統一地方選挙<br/>\n            投票日：令和5年4月9日(日) 朝7時～夜8時<br/>\n            期日前投票：令和5年3月24日(金)-4月8日(土)\n            <div style={{ marginTop: '10px', marginBottom: \"10px\"}}>\n              <ul style={{ listStyleType: \"none\" }}>\n                <li><a href=\"https://senkyo-kawasaki2023.jp/05kouhosya.htm\" target='_blank' rel=\"noreferrer\">川崎市議会議員選挙</a></li>\n                <li><a href=\"https://www.pref.kanagawa.jp/docs/em7/2023touitsu_kouhosyajouhou.html\" target='_blank' rel=\"noreferrer\">神奈川県議会議員選挙</a></li>\n                <li><a href=\"https://www.pref.kanagawa.jp/docs/em7/2023touitsu_kouhosyajouhou.html\" target='_blank' rel=\"noreferrer\">神奈川県知事選挙</a></li>\n              </ul>\n            </div>\n          </div>\n        </p>\n\n        <h4>外部リンク</h4>\n        <p>\n          <div className=\"info-list\">\n            <ul style={{ listStyleType: \"none\" }}>\n              <li><a href=\"https://senkyo-kawasaki2023.jp/index.htm\" target='_blank' rel=\"noreferrer\">令和5年4月9日執行第20回統一地方選挙特設ホームページ</a></li>\n              <li><a href=\"https://www.city.kawasaki.jp/shisei/category/58-1-0-0-0-0-0-0-0-0.html\" target='_blank' rel=\"noreferrer\">川崎市の選挙情報</a></li>\n              <li><a href=\"https://senkyo-kawasaki2023.jp/05kouhosya.htm\" target='_blank' rel=\"noreferrer\">立候補者情報</a></li>\n            </ul>\n          </div>\n        </p>\n\n        <div className=\"note\" >\n          <h4>注意事項</h4>\n          <p>\n            <ul>\n              <li>ポスター掲示場設置場所、投票所、期日前投票所の情報は、平成31年第19回統一地方選挙のものを使用しております。令和5年第20回統一地方選挙と実情が異なる場合がございます。予めご了承ください。</li>\n              <li>ポスター掲示場設置場所、投票所、期日前投票所の位置は、住所を元におおよその位置を示しており、正確な位置を示した情報ではございません。ご注意ください。</li>\n              <li>詳しいことは公式サイトをご覧ください。</li>\n              <li>問い合わせメール：info[at]govote-kawasaki.jp  [at]を@マークに置き換えてください。</li>\n            </ul>\n          </p>\n        </div>\n\n        <div className=\"note_small\" >\n          <h5>その他</h5>\n          <p>\n            <ul>\n              <li><a href=\"https://raw.githubusercontent.com/openkawasaki/govote-kawasaki/master/LICENSE.txt\" target='_blank' rel=\"noreferrer\">ライセンス表示</a></li>\n              <li><a href=\"https://raw.githubusercontent.com/openkawasaki/govote-kawasaki/master/google_analytics.txt\" target='_blank' rel=\"noreferrer\">Google Analyticsの利用について</a></li>\n            </ul>\n          </p>\n        </div>\n\n        <div className=\"copyright\">\n          powered by オープン川崎\n        </div>\n\n      </div>\n    </div>\n  );\n};\n\nexport default Content;\n","import React from \"react\";\nimport Select from 'react-select'\nimport { useNavigate } from 'react-router-dom';\nimport './Category.scss'\n\ntype Props = {\n  data: Pwamap.ShopData[];\n}\n\nconst Content = (props: Props) => {\n\n  const navigate = useNavigate();\n\n  const [categoryList, setCategoryList] = React.useState<string[]>([]);\n\n  React.useEffect(() => {\n\n    let categories: string[] = []\n\n    for (let i = 0; i < props.data.length; i++) {\n      const shop = props.data[i];\n\n      if (categories.indexOf(shop['カテゴリ']) === -1) {\n\n        categories.push(shop['カテゴリ'])\n      }\n\n    }\n\n    setCategoryList(categories)\n\n  }, [props.data])\n\n\n  return (\n    <>\n      <div className=\"head\"></div>\n      <div className=\"category\">\n        <div className=\"container\">\n          <div className=\"category-item\">\n            <label htmlFor=\"category-select\">カテゴリから選ぶ</label>\n            <Select\n              onChange={(e) => {\n                if (e) {\n                  navigate(`/list?category=${e.value}`);\n                }\n              }}\n              options={\n                categoryList.map(category => {\n                  return {\n                    value: category,\n                    label: category\n                  }\n                })\n              }\n            />\n          </div>\n\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Content;\n","import { useEffect, useState } from 'react'\nimport { ImageList, ImageListItem } from '@material-ui/core'\nimport Shop from './Shop'\nimport './Images.scss'\n\ntype Props = {\n  data: Pwamap.ShopData[];\n}\n\nconst Content = (props: Props) => {\n\n  const { data } = props;\n  const [validImageList, setValidImageList ] = useState<JSX.Element[]>([]);\n  const [shop, setShop] = useState<Pwamap.ShopData | undefined>()\n\n  const popupHandler = (shop: Pwamap.ShopData) => {\n    if (shop) {\n      setShop(shop)\n    }\n  }\n\n  const closeHandler = () => {\n    setShop(undefined)\n  }\n\n  useEffect(() => {\n\n    let imageListItems = []\n\n    for (let i = 0; i < data.length; i++) {\n      const item = data[i];\n\n      if (item['画像']) {\n\n        imageListItems.push(\n          <ImageListItem\n            key={i}\n            className=\"mui-image-list-item\"\n          >\n            <img\n              src={item['画像']}\n              alt={item['スポット名']}\n              loading=\"lazy\"\n              onClick={() => popupHandler(item)}\n              onError={e => {\n                //@ts-ignore\n                e.target.parentNode.remove()\n              }}\n            />\n          </ImageListItem>\n        )\n      }\n    }\n\n    setValidImageList(imageListItems)\n\n  }, [data])\n\n  return (\n    <>\n      <div className=\"head\">\n        <span className=\"head_text\">センキョ割実施店舗</span>\n      </div>\n      <div className=\"images\">\n        <div className=\"container\">\n          <ImageList id=\"mui-image-list\" sx={{ width: \"100%\", height: \"100%\" }} cols={2} rowHeight={164}>\n            {validImageList}\n          </ImageList>\n          {shop ?\n            <Shop shop={shop} close={closeHandler} />\n            :\n            <></>\n          }\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Content;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport './Tabbar.scss'\n\nimport { FaList, FaHome, FaSearch, FaCamera } from \"react-icons/fa\"\nimport { AiOutlineAppstore } from \"react-icons/ai\"\n\nconst Content = () => {\n  return (\n    <div className=\"tabbar\">\n      <ul>\n        <li><Link to=\"/\"><div className=\"icon\"><FaHome /></div><div className=\"text\">ホーム</div></Link></li>\n        <li><Link to=\"/list\"><div className=\"icon\"><FaList /></div><div className=\"text\">一覧</div></Link></li>\n        <li><Link to=\"/category\"><div className=\"icon\"><FaSearch /></div><div className=\"text\">カテゴリ</div></Link></li>\n        <li><Link to=\"/images\"><div className=\"icon\"><FaCamera /></div><div className=\"text\">センキョ割</div></Link></li>\n        <li><Link to=\"/about\"><div className=\"icon\"><AiOutlineAppstore /></div><div className=\"text\">マップについて</div></Link></li>\n      </ul>\n    </div>\n  );\n};\n\nexport default Content;\n","const zen2han = (str: string) => {\n  return str.replace(/[！-～]/g, function (s: string) {\n    return String.fromCharCode(s.charCodeAt(0) - 0xFEE0);\n  }).replace(/　/g, ' ');\n}\n\nexport default zen2han;\n","import zen2han from \"./zen2han\";\n\nconst table2json = (table: Array<Array<string>>) => {\n  const header = table[0]\n  const records = table.slice(1)\n\n  return records.map((record: Array<string>) => {\n\n    const properties = header.reduce((prev: any, column: any) => {\n      const value = record[header.indexOf(column)];\n      prev[column] = zen2han(value || '');\n      return prev;\n    }, {});\n    return properties;\n  });\n\n}\n\nexport default table2json;\n","import React from \"react\";\nimport { Routes, Route } from \"react-router-dom\";\nimport \"./App.scss\";\n\nimport Home from './App/Home'\nimport List from './App/List'\nimport AboutUs from './App/AboutUs'\nimport Category from './App/Category'\nimport Images from './App/Images'\n\nimport Tabbar from './App/Tabbar'\nimport table2json from \"./lib/table2json\";\n\n// You can see config.json after running `npm start` or `npm run build`\n// import config from './config.json'\n\n\nconst sortShopList = async (shopList: Pwamap.ShopData[]) => {\n\n  // 新着順にソート\n  return shopList.sort(function (item1, item2) {\n    return Date.parse(item2['タイムスタンプ']) - Date.parse(item1['タイムスタンプ'])\n  });\n\n}\n\nconst App = () => {\n  const [shopList, setShopList] = React.useState<Pwamap.ShopData[]>([])\n\n  React.useEffect(() => {\n    fetch(`${process.env.PUBLIC_URL}/data.json?timestamp=${new Date().getTime()}`)\n      .then((response) => {\n        return response.ok ? response.text() : Promise.reject(response.status);\n      })\n      .then((fetchedData) => {\n\n        const data = JSON.parse(fetchedData)\n\n        if ('values' in data === false) {\n          console.log(\"No Data Found at Spreadsheet\")\n          setShopList([])\n          return\n        }\n\n        let features = table2json(data.values);\n\n        const nextShopList: Pwamap.ShopData[] = []\n        for (let i = 0; i < features.length; i++) {\n          const feature = features[i] as Pwamap.ShopData\n\n          if (!feature['緯度'] || !feature['経度'] || !feature['スポット名']) {\n            continue;\n          }\n          if (!feature['緯度'].match(/^-?[0-9]+(\\.[0-9]+)?$/)) {\n            continue\n          }\n          if (!feature['経度'].match(/^-?[0-9]+(\\.[0-9]+)?$/)) {\n            continue\n          }\n\n          const shop = {\n            ...feature,\n            index: i\n          }\n\n          nextShopList.push(shop)\n        }\n\n        sortShopList(nextShopList).then((sortedShopList) => {\n          setShopList(sortedShopList)\n        })\n\n      });\n  }, [])\n\n  return (\n    <div className=\"app\">\n      <div className=\"app-body\">\n        <Routes>\n          <Route path=\"/\" element={<Home data={shopList} />} />\n          <Route path=\"/list\" element={<List data={shopList} />} />\n          <Route path=\"/category\" element={<Category data={shopList} />} />\n          <Route path=\"/images\" element={<Images data={shopList} />} />\n          <Route path=\"/about\" element={<AboutUs />} />\n        </Routes>\n      </div>\n      <div className=\"app-footer\">\n        <Tabbar />\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import { useQRCode } from 'next-qrcode';\n\nfunction Qrcode(props: { url: string }) {\n\n  const { url } = props;\n  const { Canvas } = useQRCode();\n\n  return (\n    <Canvas\n      text={url}\n      options={{\n        type: 'image/png',\n        margin: 0,\n        width: 128\n      }}\n    />\n  );\n}\n\nexport default Qrcode;\n","import React from \"react\";\nimport './About.scss'\nimport Qrcode from './Qrcode'\nimport config from './config.json'\n\nconst Content = () => {\n\n  const logoUrl = config.logo_image_url || `${process.env.PUBLIC_URL}/logo.svg`\n\n  return (\n    <div className=\"about\">\n      <div className=\"branding\">\n        <img className=\"image\" src={logoUrl} alt=\"\"/>\n      </div>\n\n      <div className=\"description\">{config.description}</div>\n      <div className=\"qrcode\"><Qrcode url={window.location.href}/></div>\n    </div>\n  );\n};\n\nexport default Content;\n","import React from \"react\";\n\nimport App from './App'\nimport About from './About'\nimport './Container.scss'\n\nfunction Content() {\n  return (\n    <div className=\"outer-container\">\n      <div className=\"inner-container\">\n        <About />\n        <App />\n      </div>\n    </div>\n  );\n}\n\nexport default Content;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter } from \"react-router-dom\";\nimport Container from './Container';\nimport './index.scss'\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\n\nReactDOM.render(\n  <React.StrictMode>\n    <HashRouter>\n      <Container />\n    </HashRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n\nserviceWorkerRegistration.register();\n"],"sourceRoot":""}